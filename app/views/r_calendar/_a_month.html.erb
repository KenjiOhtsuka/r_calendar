<%#
  available local variables
  year_number:  a page object for the currently displayed page
  month_number:   total number of pages
%>

<%weekday_names = ['日', '月', '火', '水', '木', '金', '土']%>
<%
  begin_day = Date.new(year_number, month_number, 1)
  begin_weekday = begin_day.wday
  end_day_number = begin_day.end_of_month.day
%>
<table class="grid">
  <caption><%=month_number%>月</caption>
  <thead>
    <tr>
      <%weekday_names.each{|wn|%>
      <th><%=wn%></th>
      <%}%>
    </tr>
  </thead>
  <tbody>
    <%day_number = 0%>
    <%while day_number < end_day_number%>
    <tr>
      <%weekday_names.each_with_index do |wn, index|%>
      <%
        if day_number > 0
          if day_number <= end_day_number
            day_number += 1
          end
        else
          if begin_weekday == index
            day_number += 1
          end
        end
      %>
      <td><%=day_number%></td>
      <%end%>
    </tr>
    <%end%>
  </tbody>
</table>
